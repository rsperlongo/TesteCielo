{"version":3,"file":"angular-chartist.js","sources":["../src/angular-chartist.js"],"sourcesContent":["import angular from 'angular';\nimport Chartist from 'chartist';\n\nconst angularChartistModule = angular.module('angular-chartist', []);\n\nclass AngularChartistCtrl {\n  constructor($scope, $element) {\n    'ngInject';\n    this.data = $scope.data;\n    this.chartType = $scope.chartType;\n\n    this.events = $scope.events() || {};\n    this.options = $scope.chartOptions() || null;\n    this.responsiveOptions = $scope.responsiveOptions() || null;\n\n    this.element = $element[0];\n\n    this.renderChart();\n\n    $scope.$watch(\n      () => {\n        return {\n          data: $scope.data,\n          chartType: $scope.chartType,\n          chartOptions: $scope.chartOptions() || null,\n          responsiveOptions: $scope.responsiveOptions() || null,\n          events: $scope.events() || {}\n        };\n      },\n      this.update.bind(this),\n      true\n    );\n\n    $scope.$on('$destroy', () => {\n      if (this.chart) {\n        this.chart.detach();\n      }\n    });\n  }\n\n  bindEvents() {\n    Object.keys(this.events).forEach(eventName => {\n      this.chart.on(eventName, this.events[eventName]);\n    });\n  }\n\n  unbindEvents(events) {\n    Object.keys(events).forEach(eventName => {\n      this.chart.off(eventName, events[eventName]);\n    });\n  }\n\n  renderChart() {\n    // ensure that the chart does not get created without data\n    if (this.data) {\n      this.chart = Chartist[this.chartType](this.element, this.data, this.options, this.responsiveOptions);\n\n      this.bindEvents();\n\n      return this.chart;\n    }\n  }\n\n  update(newConfig, oldConfig) {\n    // Update controller with new configuration\n    this.chartType = newConfig.chartType;\n    this.data = newConfig.data;\n    this.options = newConfig.chartOptions;\n    this.responsiveOptions = newConfig.responsiveOptions;\n    this.events = newConfig.events;\n\n    // If chart type changed we need to recreate whole chart, otherwise we can update\n    if (!this.chart || newConfig.chartType !== oldConfig.chartType) {\n      this.renderChart();\n    } else {\n      if (!angular.equals(newConfig.events, oldConfig.events)) {\n        this.unbindEvents(oldConfig.events);\n        this.bindEvents();\n      }\n      this.chart.update(this.data, this.options);\n    }\n  }\n}\n\nangularChartistModule.controller('AngularChartistCtrl', AngularChartistCtrl).directive('chartist', function() {\n  'ngInject';\n  return {\n    restrict: 'EA',\n    scope: {\n      // mandatory\n      data: '=chartistData',\n      chartType: '@chartistChartType',\n      // optional\n      events: '&chartistEvents',\n      chartOptions: '&chartistChartOptions',\n      responsiveOptions: '&chartistResponsiveOptions'\n    },\n    controller: 'AngularChartistCtrl'\n  };\n});\n\nexport default angularChartistModule.name;\n"],"names":["angularChartistModule","angular","module","AngularChartistCtrl","$scope","$element","data","chartType","events","options","chartOptions","responsiveOptions","element","renderChart","$watch","this","update","bind","$on","_this","chart","detach","Object","keys","forEach","eventName","_this2","on","_this3","off","Chartist","bindEvents","newConfig","oldConfig","equals","unbindEvents","controller","directive","restrict","scope","name"],"mappings":"mhBAGA,IAAMA,EAAwBC,EAAQC,OAAO,mBAAoB,IAE3DC,wBACQC,EAAQC,oIAEbC,KAAOF,EAAOE,UACdC,UAAYH,EAAOG,eAEnBC,OAASJ,EAAOI,UAAY,QAC5BC,QAAUL,EAAOM,gBAAkB,UACnCC,kBAAoBP,EAAOO,qBAAuB,UAElDC,QAAUP,EAAS,QAEnBQ,cAELT,EAAOU,OACL,iBACS,CACLR,KAAMF,EAAOE,KACbC,UAAWH,EAAOG,UAClBG,aAAcN,EAAOM,gBAAkB,KACvCC,kBAAmBP,EAAOO,qBAAuB,KACjDH,OAAQJ,EAAOI,UAAY,KAG/BO,KAAKC,OAAOC,KAAKF,OACjB,GAGFX,EAAOc,IAAI,WAAY,WACjBC,EAAKC,OACPD,EAAKC,MAAMC,kHAMfC,OAAOC,KAAKR,KAAKP,QAAQgB,QAAQ,SAAAC,GAC/BC,EAAKN,MAAMO,GAAGF,EAAWC,EAAKlB,OAAOiB,2CAI5BjB,cACXc,OAAOC,KAAKf,GAAQgB,QAAQ,SAAAC,GAC1BG,EAAKR,MAAMS,IAAIJ,EAAWjB,EAAOiB,+CAM/BV,KAAKT,iBACFc,MAAQU,EAASf,KAAKR,WAAWQ,KAAKH,QAASG,KAAKT,KAAMS,KAAKN,QAASM,KAAKJ,wBAE7EoB,aAEEhB,KAAKK,qCAITY,EAAWC,QAEX1B,UAAYyB,EAAUzB,eACtBD,KAAO0B,EAAU1B,UACjBG,QAAUuB,EAAUtB,kBACpBC,kBAAoBqB,EAAUrB,uBAC9BH,OAASwB,EAAUxB,OAGnBO,KAAKK,OAASY,EAAUzB,YAAc0B,EAAU1B,WAG9CN,EAAQiC,OAAOF,EAAUxB,OAAQyB,EAAUzB,eACzC2B,aAAaF,EAAUzB,aACvBuB,mBAEFX,MAAMJ,OAAOD,KAAKT,KAAMS,KAAKN,eAN7BI,0DAWXb,EAAsBoC,WAAW,sBAAuBjC,GAAqBkC,UAAU,WAAY,4BAE1F,CACLC,SAAU,KACVC,MAAO,CAELjC,KAAM,gBACNC,UAAW,qBAEXC,OAAQ,kBACRE,aAAc,wBACdC,kBAAmB,8BAErByB,WAAY,yBAIDpC,EAAsBwC"}